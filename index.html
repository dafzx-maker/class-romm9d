<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Number Store</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-section h1 {
            color: #667eea;
            margin: 0;
            font-size: 24px;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .btn-secondary {
            background: #48bb78;
            color: white;
        }

        .btn-secondary:hover {
            background: #38a169;
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .service-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .service-card:hover {
            transform: translateY(-5px);
        }

        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .service-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .service-price {
            font-size: 20px;
            color: #667eea;
            font-weight: bold;
        }

        .service-info {
            color: #666;
            margin-bottom: 10px;
        }

        .stock-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            margin-top: 10px;
        }

        .stock-available {
            background: #c6f6d5;
            color: #22543d;
        }

        .stock-empty {
            background: #fed7d7;
            color: #742a2a;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .admin-panel {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
        }

        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }

        .alert-error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #fc8181;
        }

        .payment-info {
            background: #fef5e7;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #f39c12;
            margin: 20px 0;
        }

        .payment-info h3 {
            color: #d68910;
            margin-bottom: 10px;
        }

        .dana-number {
            font-size: 24px;
            font-weight: bold;
            color: #e67e22;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 5px;
            margin: 10px 0;
        }

        .order-status {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-pending {
            background: #fef5e7;
            color: #d68910;
        }

        .status-verified {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-completed {
            background: #bee3f8;
            color: #2c5282;
        }

        .hide {
            display: none;
        }

        /* WhatsApp Floating Button */
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 999;
            text-decoration: none;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
        }

        .whatsapp-tooltip {
            position: absolute;
            right: 70px;
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            white-space: nowrap;
            color: #333;
            font-size: 14px;
            display: none;
        }

        .whatsapp-float:hover .whatsapp-tooltip {
            display: block;
        }

        /* CS Contact Section */
        .cs-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 30px;
            text-align: center;
        }

        .cs-section h2 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .cs-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .cs-option {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-decoration: none;
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .cs-option:hover {
            transform: translateY(-5px);
        }

        .cs-icon {
            font-size: 40px;
        }

        .cs-text {
            font-size: 16px;
            font-weight: bold;
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .hero-section h2 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .hero-section p {
            font-size: 20px;
            margin-bottom: 30px;
            opacity: 0.95;
        }

        .hero-cta {
            display: inline-block;
            padding: 15px 40px;
            background: white;
            color: #667eea;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
            text-decoration: none;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .hero-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Features Section */
        .features-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .feature-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
        }

        .feature-icon {
            font-size: 50px;
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .feature-desc {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
        }

        /* Stats Section */
        .stats-section {
            background: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 50px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            text-align: center;
        }

        .stat-item {
            padding: 20px;
        }

        .stat-number {
            font-size: 42px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 16px;
        }

        /* Section Title */
        .section-title {
            text-align: center;
            font-size: 32px;
            color: #333;
            margin-bottom: 40px;
            font-weight: bold;
        }

        .section-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-section">
                <h1>üåê WhatsApp Virtual Number</h1>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-primary" onclick="showPage('home')">Beranda</button>
                <button class="btn btn-secondary" onclick="showPage('orders')">Cek Pesanan</button>
            </div>
        </header>

        <!-- Home Page -->
        <div id="home" class="page active">
            <!-- Hero Section -->
            <div class="hero-section">
                <h2>Nomor Virtual WhatsApp Terpercaya</h2>
                <p>Dapatkan nomor virtual untuk verifikasi akun WhatsApp dari 20+ negara. Instant, Aman, dan Terjangkau!</p>
                <a href="#services" class="hero-cta" onclick="document.getElementById('servicesGrid').scrollIntoView({behavior: 'smooth'})">Lihat Layanan Kami</a>
            </div>

            <!-- Features Section -->
            <div class="features-section">
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <div class="feature-title">Instant Delivery</div>
                    <div class="feature-desc">Nomor virtual dikirim langsung setelah pembayaran terverifikasi dalam 5-15 menit</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <div class="feature-title">100% Aman</div>
                    <div class="feature-desc">Nomor virtual dijamin bekerja dan hanya digunakan oleh Anda saja</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üåç</div>
                    <div class="feature-title">20+ Negara</div>
                    <div class="feature-desc">Pilihan nomor dari Indonesia, Asia, Eropa, Amerika, dan negara lainnya</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí¨</div>
                    <div class="feature-title">Support 24/7</div>
                    <div class="feature-desc">Tim customer service siap membantu Anda kapan saja</div>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="stats-section">
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-number" id="publicTotalOrders">0</div>
                        <div class="stat-label">Pesanan Selesai</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="publicTotalCountries">20+</div>
                        <div class="stat-label">Negara Tersedia</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">5-15 Menit</div>
                        <div class="stat-label">Waktu Proses</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">24/7</div>
                        <div class="stat-label">Customer Support</div>
                    </div>
                </div>
            </div>

            <!-- Services Section -->
            <h2 class="section-title" id="services">Pilih Negara & Layanan</h2>
            <p class="section-subtitle">Harga terjangkau mulai dari Rp 4.500</p>
            <div class="services-grid" id="servicesGrid"></div>
            
            <!-- Customer Service Section -->
            <div class="cs-section">
                <h2>üí¨ Butuh Bantuan?</h2>
                <p>Tim Customer Service kami siap membantu Anda 24/7</p>
                <div class="cs-options">
                    <a href="https://wa.me/6285370786474?text=Halo,%20saya%20ingin%20bertanya%20tentang%20nomor%20virtual%20WhatsApp" target="_blank" class="cs-option">
                        <div class="cs-icon">üí¨</div>
                        <div class="cs-text">WhatsApp CS</div>
                    </a>
                    <a href="mailto:dafzxjasteb@gmail.com?subject=Pertanyaan tentang Nomor Virtual WhatsApp&body=Halo, saya ingin bertanya tentang..." class="cs-option">
                        <div class="cs-icon">üìß</div>
                        <div class="cs-text">Email Support</div>
                    </a>
                    <a href="tel:+6285370786474" class="cs-option">
                        <div class="cs-icon">üìû</div>
                        <div class="cs-text">Telepon CS</div>
                    </a>
                </div>
                <p style="margin-top: 20px; color: #666; font-size: 14px;">
                    <strong>Jam Operasional:</strong> 24/7 (Response time: 5-15 menit)
                </p>
            </div>
        </div>

        <!-- Orders Page -->
        <div id="orders" class="page">
            <div class="admin-panel">
                <h2>Cek Status Pesanan</h2>
                <div class="form-group">
                    <label>Masukkan Email Anda</label>
                    <input type="email" id="checkEmail" placeholder="email@example.com">
                </div>
                <button class="btn btn-primary" onclick="checkOrders()">Cek Pesanan</button>
                <div id="orderResults"></div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="admin" class="page">
            <div class="admin-panel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Dashboard Admin</h2>
                    <button class="btn btn-danger" onclick="logout()">Logout</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalOrders">0</div>
                        <div class="stat-label">Total Pesanan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalRevenue">Rp 0</div>
                        <div class="stat-label">Total Pendapatan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalStock">0</div>
                        <div class="stat-label">Total Stok</div>
                    </div>
                </div>

                <button class="btn btn-secondary" onclick="showAddStockModal()">+ Tambah Stok Nomor</button>
                <button class="btn btn-primary" onclick="showManageServicesModal()">‚öôÔ∏è Kelola Layanan</button>

                <h3 style="margin-top: 30px;">Daftar Pesanan</h3>
                <div id="adminOrders"></div>
            </div>
        </div>
    </div>

    <!-- Order Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <h2>Pesan Nomor Virtual</h2>
            <div id="orderForm"></div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>Login Admin</h2>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="adminPassword" placeholder="Masukkan password admin">
            </div>
            <button class="btn btn-primary" onclick="login()">Login</button>
            <button class="btn btn-secondary" onclick="closeModal('loginModal')">Batal</button>
        </div>
    </div>

    <!-- Add Stock Modal -->
    <div id="addStockModal" class="modal">
        <div class="modal-content">
            <h2>Tambah Stok Nomor</h2>
            <div class="form-group">
                <label>Pilih Layanan</label>
                <select id="stockService"></select>
            </div>
            <div class="form-group">
                <label>Nomor Virtual</label>
                <input type="text" id="stockNumber" placeholder="+62812345678">
            </div>
            <div class="form-group">
                <label>Kode OTP (opsional)</label>
                <input type="text" id="stockOTP" placeholder="Kosongkan jika belum ada">
            </div>
            <button class="btn btn-secondary" onclick="addStock()">Tambah Stok</button>
            <button class="btn btn-primary" onclick="closeModal('addStockModal')">Tutup</button>
        </div>
    </div>

    <!-- Manage Services Modal -->
    <div id="manageServicesModal" class="modal">
        <div class="modal-content">
            <h2>Kelola Layanan</h2>
            <div id="servicesList"></div>
            <hr style="margin: 20px 0;">
            <h3>Tambah Layanan Baru</h3>
            <div class="form-group">
                <label>Nama Layanan</label>
                <input type="text" id="newServiceName" placeholder="WhatsApp Indonesia">
            </div>
            <div class="form-group">
                <label>Negara</label>
                <input type="text" id="newServiceCountry" placeholder="Indonesia">
            </div>
            <div class="form-group">
                <label>Harga (Rp)</label>
                <input type="number" id="newServicePrice" placeholder="5000">
            </div>
            <button class="btn btn-secondary" onclick="addService()">Tambah Layanan</button>
            <button class="btn btn-primary" onclick="closeModal('manageServicesModal')">Tutup</button>
        </div>
    </div>

    <script>
        // Data storage
        let services = [
            { id: 1, name: 'WhatsApp Indonesia', country: 'Indonesia', price: 5000 },
            { id: 2, name: 'WhatsApp Malaysia', country: 'Malaysia', price: 6000 },
            { id: 3, name: 'WhatsApp Thailand', country: 'Thailand', price: 7000 },
            { id: 4, name: 'WhatsApp Vietnam', country: 'Vietnam', price: 6500 },
            { id: 5, name: 'WhatsApp Filipina', country: 'Filipina', price: 7500 },
            { id: 6, name: 'WhatsApp Singapura', country: 'Singapura', price: 10000 },
            { id: 7, name: 'WhatsApp India', country: 'India', price: 4500 },
            { id: 8, name: 'WhatsApp Amerika', country: 'Amerika', price: 15000 },
            { id: 9, name: 'WhatsApp Inggris', country: 'Inggris', price: 12000 },
            { id: 10, name: 'WhatsApp Jerman', country: 'Jerman', price: 11000 },
            { id: 11, name: 'WhatsApp Prancis', country: 'Prancis', price: 11000 },
            { id: 12, name: 'WhatsApp Australia', country: 'Australia', price: 13000 },
            { id: 13, name: 'WhatsApp Kanada', country: 'Kanada', price: 14000 },
            { id: 14, name: 'WhatsApp Brazil', country: 'Brazil', price: 8000 },
            { id: 15, name: 'WhatsApp Turki', country: 'Turki', price: 7000 },
            { id: 16, name: 'WhatsApp Jepang', country: 'Jepang', price: 12000 },
            { id: 17, name: 'WhatsApp Korea Selatan', country: 'Korea Selatan', price: 11000 },
            { id: 18, name: 'WhatsApp Arab Saudi', country: 'Arab Saudi', price: 9000 },
            { id: 19, name: 'WhatsApp Uni Emirat Arab', country: 'UAE', price: 10000 },
            { id: 20, name: 'WhatsApp Rusia', country: 'Rusia', price: 9500 }
        ];

        let stock = [];
        let orders = [];
        let isAdmin = false;
        const ADMIN_PASSWORD = 'admin123';
        const DANA_NUMBER = '085370786474';
        const CS_WHATSAPP = '6285370786474'; // Format internasional
        const CS_EMAIL = 'dafzxjasteb@gmail.com';
        const CS_PHONE = '+6285370786474';

        // Initialize
        function init() {
            loadData();
            renderServices();
            updateStats();
            updatePublicStats();
        }

        // Load data from memory
        function loadData() {
            try {
                const savedServices = localStorage.getItem('services');
                const savedStock = localStorage.getItem('stock');
                const savedOrders = localStorage.getItem('orders');
                
                if (savedServices) services = JSON.parse(savedServices);
                if (savedStock) stock = JSON.parse(savedStock);
                if (savedOrders) orders = JSON.parse(savedOrders);
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Save data to memory
        function saveData() {
            try {
                localStorage.setItem('services', JSON.stringify(services));
                localStorage.setItem('stock', JSON.stringify(stock));
                localStorage.setItem('orders', JSON.stringify(orders));
            } catch (error) {
                console.error('Error saving data:', error);
                alert('Gagal menyimpan data. Storage mungkin penuh.');
            }
        }

        // Show page
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const targetPage = document.getElementById(pageId);
            
            if (!targetPage) {
                console.error('Page not found:', pageId);
                return;
            }
            
            targetPage.classList.add('active');
            
            if (pageId === 'admin' && !isAdmin) {
                showPage('home');
                showLoginModal();
                return;
            }
            
            if (pageId === 'admin') {
                renderAdminOrders();
                updateStats();
            }
            
            if (pageId === 'home') {
                updatePublicStats();
            }
            
            // Scroll to top when changing pages
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Render services
        function renderServices() {
            const grid = document.getElementById('servicesGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            if (services.length === 0) {
                grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #666;">Belum ada layanan tersedia.</p>';
                return;
            }
            
            services.forEach(service => {
                const availableStock = stock.filter(s => s.serviceId === service.id && s.status === 'available').length;
                
                const card = document.createElement('div');
                card.className = 'service-card';
                card.innerHTML = `
                    <div class="service-header">
                        <div class="service-name">${service.name}</div>
                        <div class="service-price">Rp ${service.price.toLocaleString()}</div>
                    </div>
                    <div class="service-info">üìç ${service.country}</div>
                    <div class="service-info">‚è±Ô∏è Instant Delivery</div>
                    <span class="stock-badge ${availableStock > 0 ? 'stock-available' : 'stock-empty'}">
                        Stok: ${availableStock}
                    </span>
                    <br><br>
                    <button class="btn btn-primary" onclick="orderService(${service.id})" ${availableStock === 0 ? 'disabled' : ''}>
                        ${availableStock > 0 ? 'Pesan Sekarang' : 'Stok Habis'}
                    </button>
                `;
                grid.appendChild(card);
            });
        }

        // Order service
        function orderService(serviceId) {
            const service = services.find(s => s.id === serviceId);
            
            if (!service) {
                alert('Layanan tidak ditemukan!');
                return;
            }
            
            // Check stock availability
            const availableStock = stock.filter(s => s.serviceId === serviceId && s.status === 'available').length;
            if (availableStock === 0) {
                alert('Maaf, stok untuk layanan ini sedang habis. Silakan hubungi CS atau pilih layanan lain.');
                return;
            }
            
            const modal = document.getElementById('orderModal');
            const form = document.getElementById('orderForm');
            
            form.innerHTML = `
                <div class="form-group">
                    <label>Layanan</label>
                    <input type="text" value="${service.name}" disabled>
                </div>
                <div class="form-group">
                    <label>Harga</label>
                    <input type="text" value="Rp ${service.price.toLocaleString()}" disabled>
                </div>
                <div class="form-group">
                    <label>Email Anda</label>
                    <input type="email" id="orderEmail" placeholder="email@example.com" required>
                </div>
                <div class="form-group">
                    <label>Nama Lengkap</label>
                    <input type="text" id="orderName" placeholder="Nama Anda" required>
                </div>
                <div class="payment-info">
                    <h3>üí≥ Informasi Pembayaran</h3>
                    <p>Transfer ke DANA berikut:</p>
                    <div class="dana-number">${DANA_NUMBER}</div>
                    <p style="text-align: center; margin-top: 10px;">Sejumlah: <strong>Rp ${service.price.toLocaleString()}</strong></p>
                    <p style="text-align: center; margin-top: 15px; font-size: 14px;">
                        Butuh bantuan? <a href="https://wa.me/${CS_WHATSAPP}?text=Halo,%20saya%20butuh%20bantuan%20untuk%20pembayaran" target="_blank" style="color: #25D366; font-weight: bold;">Chat CS</a>
                    </p>
                </div>
                <div class="form-group">
                    <label>Upload Bukti Transfer</label>
                    <input type="file" id="orderProof" accept="image/*" required>
                </div>
                <button class="btn btn-primary" onclick="submitOrder(${serviceId})">Kirim Pesanan</button>
                <button class="btn btn-secondary" onclick="closeModal('orderModal')">Batal</button>
            `;
            
            modal.classList.add('active');
        }

        // Submit order
        function submitOrder(serviceId) {
            const emailInput = document.getElementById('orderEmail');
            const nameInput = document.getElementById('orderName');
            const proofInput = document.getElementById('orderProof');
            
            if (!emailInput || !nameInput || !proofInput) {
                alert('Form tidak lengkap. Mohon refresh halaman.');
                return;
            }
            
            const email = emailInput.value.trim();
            const name = nameInput.value.trim();
            const proof = proofInput.files[0];
            
            if (!email || !name || !proof) {
                alert('Mohon lengkapi semua data!');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Format email tidak valid!');
                return;
            }
            
            // Validate name length
            if (name.length < 3) {
                alert('Nama terlalu pendek! Minimal 3 karakter.');
                return;
            }
            
            // Validate file type
            const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
            if (!validTypes.includes(proof.type)) {
                alert('Format file tidak valid! Hanya JPG, PNG, atau GIF.');
                return;
            }
            
            // Validate file size (max 5MB)
            const maxSize = 5 * 1024 * 1024; // 5MB in bytes
            if (proof.size > maxSize) {
                alert('Ukuran file terlalu besar! Maksimal 5MB.');
                return;
            }
            
            const service = services.find(s => s.id === serviceId);
            if (!service) {
                alert('Layanan tidak ditemukan!');
                return;
            }
            
            // Final stock check
            const availableStock = stock.filter(s => s.serviceId === serviceId && s.status === 'available').length;
            if (availableStock === 0) {
                alert('Maaf, stok habis saat Anda memesan. Silakan pilih layanan lain.');
                closeModal('orderModal');
                renderServices();
                return;
            }
            
            const order = {
                id: Date.now(),
                serviceId,
                serviceName: service.name,
                price: service.price,
                email,
                name,
                status: 'pending',
                date: new Date().toISOString(),
                proofName: proof.name,
                proofSize: proof.size,
                proofType: proof.type
            };
            
            orders.push(order);
            saveData();
            
            closeModal('orderModal');
            
            // Show success message and redirect
            alert('‚úÖ Pesanan berhasil dibuat!\n\n' +
                  'üìß Email: ' + email + '\n' +
                  'üí∞ Total: Rp ' + service.price.toLocaleString() + '\n\n' +
                  'Admin akan memverifikasi pembayaran Anda dalam 5-15 menit.\n' +
                  'Anda akan diarahkan ke halaman Cek Pesanan...');
            
            // Set email and redirect to orders page
            const checkEmailInput = document.getElementById('checkEmail');
            if (checkEmailInput) {
                checkEmailInput.value = email;
            }
            showPage('orders');
            setTimeout(() => checkOrders(), 100);
        }

        // Check orders
        function checkOrders() {
            const emailInput = document.getElementById('checkEmail');
            const results = document.getElementById('orderResults');
            
            if (!emailInput || !results) {
                alert('Halaman tidak dimuat dengan benar. Refresh dan coba lagi.');
                return;
            }
            
            const email = emailInput.value.trim();
            
            if (!email) {
                results.innerHTML = '<div class="alert alert-error">Masukkan email Anda!</div>';
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                results.innerHTML = '<div class="alert alert-error">Format email tidak valid!</div>';
                return;
            }
            
            const userOrders = orders.filter(o => o.email.toLowerCase() === email.toLowerCase());
            
            if (userOrders.length === 0) {
                results.innerHTML = '<div class="alert alert-error">Tidak ada pesanan ditemukan untuk email ini.</div>';
                return;
            }
            
            let html = '<h3 style="margin-top: 20px;">Pesanan Anda:</h3><table><tr><th>Layanan</th><th>Tanggal</th><th>Status</th><th>Nomor Virtual</th><th>OTP</th></tr>';
            
            // Sort by date, newest first
            userOrders.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            userOrders.forEach(order => {
                let statusClass = 'status-pending';
                let statusText = 'Menunggu Verifikasi';
                
                if (order.status === 'verified') {
                    statusClass = 'status-verified';
                    statusText = 'Pembayaran Terverifikasi';
                }
                
                if (order.status === 'completed') {
                    statusClass = 'status-completed';
                    statusText = 'Selesai';
                }
                
                const otpCount = order.otpCodes ? order.otpCodes.length : 0;
                
                html += `<tr>
                    <td>${order.serviceName}</td>
                    <td>${new Date(order.date).toLocaleString('id-ID')}</td>
                    <td><span class="order-status ${statusClass}">${statusText}</span></td>
                    <td>${order.virtualNumber || '-'}</td>
                    <td>
                        ${order.status === 'completed' ? `
                            <button class="btn btn-primary" onclick="viewOTP(${order.id})">Lihat OTP ${otpCount > 0 ? '(' + otpCount + ')' : ''}</button>
                        ` : '-'}
                    </td>
                </tr>`;
            });
            
            html += '</table>';
            results.innerHTML = html;
        }

        // Admin functions
        function showLoginModal() {
            const passwordInput = document.getElementById('adminPassword');
            if (passwordInput) {
                passwordInput.value = ''; // Clear any existing password
            }
            document.getElementById('loginModal').classList.add('active');
        }

        function login() {
            const passwordInput = document.getElementById('adminPassword');
            if (!passwordInput) {
                alert('Form login tidak ditemukan. Refresh halaman.');
                return;
            }
            
            const password = passwordInput.value;
            
            if (!password) {
                alert('Masukkan password!');
                return;
            }
            
            if (password === ADMIN_PASSWORD) {
                isAdmin = true;
                closeModal('loginModal');
                passwordInput.value = ''; // Clear password
                showPage('admin');
            } else {
                alert('Password salah!');
                passwordInput.value = ''; // Clear wrong password
                passwordInput.focus(); // Focus back to input
            }
        }

        function logout() {
            isAdmin = false;
            showPage('home');
        }

        function showAddStockModal() {
            const select = document.getElementById('stockService');
            if (!select) return;
            
            select.innerHTML = '';
            
            if (services.length === 0) {
                select.innerHTML = '<option value="">Belum ada layanan</option>';
                alert('Tambahkan layanan terlebih dahulu sebelum menambah stok!');
                return;
            }
            
            services.forEach(s => {
                const option = document.createElement('option');
                option.value = s.id;
                option.textContent = s.name;
                select.appendChild(option);
            });
            document.getElementById('addStockModal').classList.add('active');
        }

        function addStock() {
            const serviceIdInput = document.getElementById('stockService');
            const numberInput = document.getElementById('stockNumber');
            const otpInput = document.getElementById('stockOTP');
            
            if (!serviceIdInput || !numberInput || !otpInput) {
                alert('Form tidak ditemukan. Mohon refresh halaman.');
                return;
            }
            
            const serviceId = parseInt(serviceIdInput.value);
            const number = numberInput.value.trim();
            const otp = otpInput.value.trim();
            
            if (!number) {
                alert('Masukkan nomor virtual!');
                return;
            }
            
            if (!serviceId || isNaN(serviceId)) {
                alert('Pilih layanan terlebih dahulu!');
                return;
            }
            
            // Validate phone number format (basic)
            const phoneRegex = /^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/;
            if (!phoneRegex.test(number)) {
                alert('Format nomor tidak valid! Contoh: +628123456789 atau 08123456789');
                return;
            }
            
            // Check if service exists
            const service = services.find(s => s.id === serviceId);
            if (!service) {
                alert('Layanan tidak ditemukan! Refresh dan coba lagi.');
                return;
            }
            
            // Check if number already exists
            const exists = stock.find(s => s.number === number && s.serviceId === serviceId);
            if (exists) {
                alert('Nomor ini sudah ada di stok!');
                return;
            }
            
            stock.push({
                id: Date.now(),
                serviceId,
                number,
                otp: otp || '',
                status: 'available',
                addedDate: new Date().toISOString()
            });
            
            saveData();
            renderServices();
            updateStats();
            
            numberInput.value = '';
            otpInput.value = '';
            
            alert(`‚úÖ Stok berhasil ditambahkan!\n\nLayanan: ${service.name}\nNomor: ${number}`);
        }

        function showManageServicesModal() {
            renderServicesList();
            document.getElementById('manageServicesModal').classList.add('active');
        }

        function renderServicesList() {
            const list = document.getElementById('servicesList');
            if (!list) return;
            
            if (services.length === 0) {
                list.innerHTML = '<p>Belum ada layanan. Tambahkan layanan baru di bawah.</p>';
                return;
            }
            
            let html = '<table><tr><th>Nama</th><th>Negara</th><th>Harga</th><th>Aksi</th></tr>';
            
            services.forEach(s => {
                html += `<tr>
                    <td>${s.name}</td>
                    <td>${s.country}</td>
                    <td>Rp ${s.price.toLocaleString()}</td>
                    <td><button class="btn btn-danger" onclick="deleteService(${s.id})">Hapus</button></td>
                </tr>`;
            });
            
            html += '</table>';
            list.innerHTML = html;
        }

        function addService() {
            const nameInput = document.getElementById('newServiceName');
            const countryInput = document.getElementById('newServiceCountry');
            const priceInput = document.getElementById('newServicePrice');
            
            if (!nameInput || !countryInput || !priceInput) {
                alert('Form tidak ditemukan. Mohon refresh halaman.');
                return;
            }
            
            const name = nameInput.value.trim();
            const country = countryInput.value.trim();
            const price = parseInt(priceInput.value);
            
            if (!name || !country || !price || isNaN(price) || price <= 0) {
                alert('Lengkapi semua data dengan benar! Harga harus angka positif.');
                return;
            }
            
            if (name.length < 5) {
                alert('Nama layanan terlalu pendek! Minimal 5 karakter.');
                return;
            }
            
            if (country.length < 3) {
                alert('Nama negara terlalu pendek! Minimal 3 karakter.');
                return;
            }
            
            if (price < 1000) {
                alert('Harga terlalu rendah! Minimal Rp 1.000');
                return;
            }
            
            if (price > 1000000) {
                alert('Harga terlalu tinggi! Maksimal Rp 1.000.000');
                return;
            }
            
            // Check if service already exists
            const exists = services.find(s => s.name.toLowerCase() === name.toLowerCase());
            if (exists) {
                alert('Layanan dengan nama ini sudah ada!');
                return;
            }
            
            services.push({
                id: Date.now(),
                name,
                country,
                price
            });
            
            saveData();
            renderServices();
            renderServicesList();
            
            nameInput.value = '';
            countryInput.value = '';
            priceInput.value = '';
            
            alert(`‚úÖ Layanan berhasil ditambahkan!\n\n${name}\n${country}\nRp ${price.toLocaleString()}`);
        }

        function deleteService(id) {
            const service = services.find(s => s.id === id);
            if (!service) {
                alert('Layanan tidak ditemukan!');
                return;
            }
            
            const relatedStock = stock.filter(s => s.serviceId === id);
            const relatedOrders = orders.filter(o => o.serviceId === id);
            
            let confirmMsg = `Hapus layanan "${service.name}"?`;
            
            if (relatedStock.length > 0) {
                confirmMsg += `\n\n‚ö†Ô∏è ${relatedStock.length} nomor di stok akan ikut terhapus.`;
            }
            
            if (relatedOrders.length > 0) {
                confirmMsg += `\n‚ö†Ô∏è ${relatedOrders.length} pesanan terkait layanan ini akan terpengaruh.`;
            }
            
            if (!confirm(confirmMsg)) {
                return;
            }
            
            services = services.filter(s => s.id !== id);
            // Also remove related stock
            stock = stock.filter(s => s.serviceId !== id);
            
            saveData();
            renderServices();
            renderServicesList();
            updateStats();
            
            alert(`‚úÖ Layanan "${service.name}" berhasil dihapus!`);
        }

        function renderAdminOrders() {
            const container = document.getElementById('adminOrders');
            if (!container) return;
            
            if (orders.length === 0) {
                container.innerHTML = '<p>Belum ada pesanan.</p>';
                return;
            }
            
            let html = '<table><tr><th>ID</th><th>Layanan</th><th>Pelanggan</th><th>Email</th><th>Harga</th><th>Status</th><th>Aksi</th></tr>';
            
            orders.slice().reverse().forEach(order => {
                let statusClass = 'status-pending';
                let statusText = 'Pending';
                
                if (order.status === 'verified') {
                    statusClass = 'status-verified';
                    statusText = 'Terverifikasi';
                }
                
                if (order.status === 'completed') {
                    statusClass = 'status-completed';
                    statusText = 'Selesai';
                }
                
                html += `<tr>
                    <td>#${order.id}</td>
                    <td>${order.serviceName}</td>
                    <td>${order.name}</td>
                    <td>${order.email}</td>
                    <td>Rp ${order.price.toLocaleString()}</td>
                    <td><span class="order-status ${statusClass}">${statusText}</span></td>
                    <td>
                        ${order.status === 'pending' ? `<button class="btn btn-secondary" onclick="verifyOrder(${order.id})">Verifikasi</button>` : ''}
                        ${order.status === 'verified' ? `<button class="btn btn-primary" onclick="completeOrder(${order.id})">Kirim Nomor</button>` : ''}
                        ${order.status === 'completed' ? `<button class="btn btn-primary" onclick="sendOTP(${order.id})">Kirim OTP</button>` : ''}
                    </td>
                </tr>`;
            });
            
            html += '</table>';
            container.innerHTML = html;
        }

        function verifyOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) {
                alert('Pesanan tidak ditemukan!');
                return;
            }
            
            if (order.status !== 'pending') {
                alert('Pesanan ini sudah diverifikasi!');
                return;
            }
            
            order.status = 'verified';
            saveData();
            renderAdminOrders();
            updateStats();
            alert('Pembayaran terverifikasi!');
        }

        function completeOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) {
                alert('Pesanan tidak ditemukan!');
                return;
            }
            
            if (order.status !== 'verified') {
                alert('Pesanan belum diverifikasi!');
                return;
            }
            
            const availableNumber = stock.find(s => s.serviceId === order.serviceId && s.status === 'available');
            
            if (!availableNumber) {
                alert('Stok nomor habis untuk layanan ini!');
                return;
            }
            
            order.virtualNumber = availableNumber.number;
            order.status = 'completed';
            order.completedDate = new Date().toISOString();
            availableNumber.status = 'sold';
            availableNumber.soldTo = order.email;
            availableNumber.soldDate = new Date().toISOString();
            
            saveData();
            renderAdminOrders();
            renderServices();
            updateStats();
            updatePublicStats();
            
            alert(`‚úÖ Nomor berhasil dikirim!\n\n` +
                  `üì± Nomor: ${availableNumber.number}\n` +
                  `üë§ Pelanggan: ${order.name}\n` +
                  `üìß Email: ${order.email}\n\n` +
                  `Silakan hubungi pelanggan untuk konfirmasi.`);
        }

        function updateStats() {
            const totalOrdersEl = document.getElementById('totalOrders');
            const totalRevenueEl = document.getElementById('totalRevenue');
            const totalStockEl = document.getElementById('totalStock');
            
            if (!totalOrdersEl || !totalRevenueEl || !totalStockEl) return;
            
            const totalOrders = orders.length;
            const totalRevenue = orders.filter(o => o.status === 'completed').reduce((sum, o) => sum + o.price, 0);
            const totalStock = stock.filter(s => s.status === 'available').length;
            
            totalOrdersEl.textContent = totalOrders;
            totalRevenueEl.textContent = 'Rp ' + totalRevenue.toLocaleString();
            totalStockEl.textContent = totalStock;
        }

        function updatePublicStats() {
            const publicOrdersEl = document.getElementById('publicTotalOrders');
            if (!publicOrdersEl) return;
            
            const completedOrders = orders.filter(o => o.status === 'completed').length;
            publicOrdersEl.textContent = completedOrders;
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }

        // Send OTP function for admin
        function sendOTP(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) {
                alert('Pesanan tidak ditemukan!');
                return;
            }
            
            if (order.status !== 'completed') {
                alert('Nomor belum dikirim ke pelanggan!');
                return;
            }
            
            const otp = prompt('Masukkan kode OTP yang diterima:');
            if (!otp || otp.trim() === '') {
                return;
            }
            
            if (!order.otpCodes) {
                order.otpCodes = [];
            }
            
            order.otpCodes.push({
                code: otp.trim(),
                time: new Date().toISOString()
            });
            
            saveData();
            alert(`‚úÖ OTP berhasil dikirim!\n\nKode: ${otp.trim()}\n\nPelanggan dapat melihat OTP di halaman pesanan mereka.`);
        }

        // View OTP function for customer
        function viewOTP(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) {
                alert('Pesanan tidak ditemukan!');
                return;
            }
            
            if (!order.otpCodes || order.otpCodes.length === 0) {
                alert('Belum ada kode OTP yang diterima.\n\nSilakan tunggu, admin akan mengirim OTP setelah kode masuk ke nomor virtual Anda.');
                return;
            }
            
            let message = 'üì± KODE OTP ANDA\n';
            message += '='.repeat(30) + '\n\n';
            
            order.otpCodes.forEach((otp, index) => {
                const time = new Date(otp.time).toLocaleString('id-ID', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                message += `${index + 1}. Kode: ${otp.code}\n`;
                message += `   Waktu: ${time}\n\n`;
            });
            
            message += '='.repeat(30) + '\n';
            message += `Total OTP: ${order.otpCodes.length}`;
            
            alert(message);
        }

        // Close modal on outside click
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Secret admin access (Ctrl + Shift + A)
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.shiftKey && event.key === 'A') {
                showLoginModal();
            }
        });

        // Admin access via URL hash
        function checkAdminAccess() {
            if (window.location.hash === '#admin-login') {
                showLoginModal();
                // Clear hash without page reload
                history.replaceState(null, null, ' ');
            }
        }

        // Check on load and hash change
        window.addEventListener('load', checkAdminAccess);
        window.addEventListener('hashchange', checkAdminAccess);
        
        // Handle Enter key in login modal
        document.addEventListener('keydown', function(event) {
            const loginModal = document.getElementById('loginModal');
            if (loginModal && loginModal.classList.contains('active')) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    login();
                }
                if (event.key === 'Escape') {
                    closeModal('loginModal');
                }
            }
        });

        // Initialize on load
        init();
    </script>
</body>
</html>
